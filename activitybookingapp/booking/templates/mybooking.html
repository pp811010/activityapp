<!DOCTYPE html>
<html lang="en">
	<head>
    	<title>Mybooking</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://cdn.tailwindcss.com"></script>
	</head>

	<body>
		<div class="px-60 py-20">
			<div class="flex  items-center justify-end space-y-1">
				<div>
					<p>Hello,</p>
					<p class="text-xl font-bold">{{student}}</p>
					<p class="text-sm text-gray-500 mt-2">{{student.stu_card}}</p>
				</div>
			</div>

			<div class='py-10 px-20'>
				<p class="text-lg">Booking</p>
				<hr class="my-4 mb-8" >
				<div id = 'booking' class="grid grid-cols-3 gap-7 justify-center	">
					{% for i in booking %}
						<div class="max-w-72 p-6 bg-white rounded-lg shadow-md">
						
							<h2 class="text-lg font-bold text-gray-900">{{i.place}}</h2>
					
							
							<div class="mt-4">
								<p class="text-sm text-gray-500">Service</p>
								<p class="text-lg text-gray-900">{{i.place.location}}</p>
							</div>
					
							
							<div class="mt-4 flex justify-between">
								<div>
									<p class="text-sm text-gray-500">Date</p>
									<p class="text-lg text-gray-900">{{ i.booking_date|date:"F j, Y" }}</p>
								</div>
								<div>
									<p class="text-sm text-gray-500">Time</p>
									<p class="text-lg text-gray-900">{{ i.booking_date|time:"H:i" }}</p>
								</div>
							</div>
					
							
							<hr class="my-4">
			
							<div class="flex justify-between">
								<button class="text-purple-600 font-semibold">Penning</button>
								<button type="submit" onclick="deleteProject({{ i.id }}, '{{csrf_token}}')" class="text-gray-400">ยกเลิก</button>
							</div>
						</div>
					{% endfor %}


				</div>
			</div>
		</div>
	</body>
	<script>
		function deleteProject(booking_id, csrf_token) {
			// กำหนด path ให้ถูกต้อง
			fetch(`/authen/mybooking/${booking_id}/`, {
			method: "DELETE",
			headers: {
				"Content-Type": "application/json",
				"X-CSRFToken": csrf_token,
			},
			})
			.then((data) => {
				console.log("Item deleted successfully");
				window.location.reload();
			})
			.catch((error) => console.error("Error:", error));
		}
	</script>
</html>
