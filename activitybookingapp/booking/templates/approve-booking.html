{% extends 'layout.html' %}
{% block head %}
  <title>Booking List</title>
{% endblock %}
{% block content %}
  <div class="flex flex-col w-full h-full pt-20 px-20">
    <h1 class="font-bold text-2xl">{{ place.name }}</h1>
    <div class="grid grid-cols-4 gap-7 overflow-x-auto overflow-y-auto max-h-screen h-3/4 rounded-xl w-full p-2">
      {% for i in bookings %}
        <div>
          <div class="w-full p-6 bg-white rounded-lg shadow-md border border-gray-100">
            <a href="">
              <h2 class="text-base font-bold text-gray-900">{{i.student}}</h2>

              <div class="mt-4">
                <p class="text-sm text-gray-500">Service</p>
                <p class="text-base text-gray-900">{{ i.place.location }}</p>
              </div>

              <div class="mt-4 flex justify-between">
                <div>
                  <p class="text-sm text-gray-500">Date</p>
                  <p class="text-base text-gray-900">{{ i.date|date:'F j, Y' }}</p>
                </div>
                <div>
                  <p class="text-sm text-gray-500">Time</p>
                  <p class="text-base text-gray-900">{{ i.start_time|time:'H:i' }} - {{ i.end_time|time:'H:i' }}</p>
                </div>
              </div>

              <div class="flex flex-col w-full gap-2 mt-4 justify-start items-start">
                <p class="text-sm text-gray-500">Status</p>
                {% if i.status == 'PENDING' %}
                  <button class="text-yellow-400 font-semibold text-sm">{{ i.status }}</button>
                {% elif i.status == 'APPROVED' %}
                  <button class="text-green-600 font-semibold text-sm">{{ i.status }}</button>
                {% else %}
                  <button class="text-red-500 font-semibold text-sm">{{ i.status }}</button>
                {% endif %}
              </div>
            </a>
            <hr class="my-4">

            <div class="gap-2 flex w-full justify-end">
                <form action="{% url 'change-booking-status' i.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="reject">
                    <button type="submit" class="text-sm p-2 rounded-lg text-red-500 border border-red-500 bg-red-100 hover:bg-red-400 hover:text-white duration-200">
                        <i class="fa-regular fa-circle-xmark"></i> Reject
                    </button>
                </form>
                <form action="{% url 'change-booking-status' i.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="approve">
                    <button type="submit" class="text-sm p-2 rounded-lg text-green-500 border border-green-500 bg-green-100 hover:bg-green-400 hover:text-white duration-200">
                        <i class="fa-regular fa-circle-check"></i> Approve
                    </button>
                </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
